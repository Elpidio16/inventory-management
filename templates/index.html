<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lesageconsulting</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo-section">
                <img src="{{ url_for('static', filename='lesageconsulting.png') }}" alt="lesageconsulting logo" class="nav-logo">
                <h1 class="nav-title">lesageconsulting</h1>
            </div>
            <div class="nav-links">
                <a href="#" onclick="showTab('dashboard')" class="nav-link active">Tableau de bord</a>
                <a href="#" onclick="showTab('products')" class="nav-link">Ajouter un produit</a>
                <a href="#" onclick="showTab('manage-products')" class="nav-link">G√©rer les produits</a>
                <a href="#" onclick="showTab('transaction')" class="nav-link">Enregistrer une transaction</a>
                <a href="#" onclick="showTab('categories')" class="nav-link">G√©rer les cat√©gories</a>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <main class="container">
        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="page-title">
                <h2>Tableau de bord</h2>
                <button class="btn btn-refresh" onclick="refreshDashboard()">üîÑ Rafra√Æchir</button>
            </div>

            <!-- Summary Cards -->
            <div class="summary-cards">
                <div class="card">
                    <div class="card-label">Nombre de produits</div>
                    <div class="card-value" id="totalProducts">0</div>
                </div>
                <div class="card">
                    <div class="card-label">Quantit√© en stock</div>
                    <div class="card-value" id="totalQuantity">0</div>
                </div>
                <div class="card">
                    <div class="card-label">Valeur totale du stock</div>
                    <div class="card-value" id="totalPrice">0.00 FCFA</div>
                </div>
                <div class="card">
                    <div class="card-label">Cat√©gories</div>
                    <div class="card-value" id="totalCategories">0</div>
                </div>
            </div>

            <!-- Inventory by Category -->
            <div class="card-section">
                <h3>Stock par cat√©gorie</h3>
                <div id="inventoryByCategory">
                    <p class="loading">Chargement des donn√©es...</p>
                </div>
            </div>
        </div>

        <!-- Add Product Tab -->
        <div id="products" class="tab-content">
            <div class="page-title">
                <h2>Ajouter un nouveau produit</h2>
            </div>

            <div class="form-card">
                <form id="productForm" onsubmit="addProduct(event)">
                    <div class="form-group">
                        <label for="productName">Nom du produit</label>
                        <input type="text" id="productName" required>
                    </div>

                    <div class="form-group">
                        <label for="productSku">Code produit</label>
                        <input type="text" id="productSku" required>
                    </div>

                    <div class="form-group">
                        <label for="productPrice">Prix (FCFA)</label>
                        <input type="number" id="productPrice" step="0.01" placeholder="Prix en FCFA" required>
                    </div>

                    <div class="form-group">
                        <label for="productCategory">Cat√©gorie</label>
                        <select id="productCategory" required>
                            <option value="">S√©lectionner une cat√©gorie</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="productDescription">Description</label>
                        <textarea id="productDescription" rows="4"></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary">Ajouter le produit</button>
                    <div id="productMessage" class="message" style="display: none;"></div>
                </form>
            </div>
        </div>

        <!-- Record Transaction Tab -->
        <div id="transaction" class="tab-content">
            <div class="page-title">
                <h2>Enregistrer une transaction</h2>
            </div>

            <div class="form-card">
                <form id="transactionForm" onsubmit="recordTransaction(event)">
                    <div class="form-group">
                        <label for="transactionType">Type de transaction</label>
                        <select id="transactionType" required>
                            <option value="ENTRY">Entr√©e (Produit re√ßu)</option>
                            <option value="EXIT">Sortie (Produit vendu)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="transactionProduct">Produit</label>
                        <select id="transactionProduct" required>
                            <option value="">S√©lectionner un produit</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="transactionQuantity">Quantit√©</label>
                        <input type="number" id="transactionQuantity" min="1" required>
                    </div>

                    <div class="form-group">
                        <label for="transactionReason">Raison</label>
                        <input type="text" id="transactionReason" placeholder="ex. Commande, Vente client">
                    </div>

                    <div class="form-group">
                        <label for="transactionNotes">Notes</label>
                        <textarea id="transactionNotes" rows="3"></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary">Enregistrer la transaction</button>
                    <div id="transactionMessage" class="message" style="display: none;"></div>
                </form>
            </div>

            <!-- Recent Transactions -->
            <div class="card-section" style="margin-top: 2rem;">
                <h3>Transactions r√©centes</h3>
                <div id="recentTransactions">
                    <p class="loading">Chargement des transactions...</p>
                </div>
            </div>
        </div>

        <!-- Manage Products Tab -->
        <div id="manage-products" class="tab-content">
            <div class="page-title">
                <h2>G√©rer les produits</h2>
            </div>

            <div class="card-section">
                <h3>Tous les produits</h3>
                <div id="productsList">
                    <p class="loading">Chargement des produits...</p>
                </div>
            </div>
        </div>

        <!-- Manage Categories Tab -->
        <div id="categories" class="tab-content">
            <div class="page-title">
                <h2>G√©rer les cat√©gories</h2>
            </div>

            <!-- Add Category Form -->
            <div class="form-card">
                <h3>Ajouter une nouvelle cat√©gorie</h3>
                <form id="categoryForm" onsubmit="addCategory(event)">
                    <div class="form-group">
                        <label for="categoryName">Nom de la cat√©gorie</label>
                        <input type="text" id="categoryName" required>
                    </div>

                    <div class="form-group">
                        <label for="categoryDescription">Description</label>
                        <textarea id="categoryDescription" rows="3"></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary">Ajouter la cat√©gorie</button>
                    <div id="categoryMessage" class="message" style="display: none;"></div>
                </form>
            </div>

            <!-- Categories List -->
            <div class="card-section">
                <h3>Toutes les cat√©gories</h3>
                <div id="categoriesList">
                    <p class="loading">Chargement des cat√©gories...</p>
                </div>
            </div>
        </div>
    </main>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
